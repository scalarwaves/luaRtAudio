PROJECT(RtAudio)
cmake_minimum_required(VERSION 2.8)

add_definitions(-DLUA_BUILD_AS_DLL -DLUA_LIB)
if (WIN32)
	add_definitions(-D__WINDOWS_DS__ -D__WINDOWS_ASIO__ -D__WINDOWS_WASAPI__)
endif(WIN32)


add_definitions(-DHAVE_GETTIMEOFDAY)
if(LIBSNDFILE_INCLUDE_DIR)
	add_definitions(-DUSE_SNDFILE)
	INCLUDE_DIRECTORIES(${LIBSNDFILE_INCLUDE_DIR})
	set(LINKSNDFILE ${LIBSNDFILE_LIB})
endif()
INCLUDE_DIRECTORIES(${LUA_INCLUDE_DIR})
INCLUDE_DIRECTORIES(RtAudio)
INCLUDE_DIRECTORIES(RtAudio/include)
aux_source_directory(RtAudio/include ASIO)
ADD_LIBRARY(RtAudio SHARED RtAudio/RtAudio.cpp luaRtAudio/luaRtAudio.cpp ${ASIO})
set_target_properties(RtAudio PROPERTIES PREFIX "")
TARGET_LINK_LIBRARIES(RtAudio ${LUA_LIBRARY} winmm dsound ole32 uuid ksuser ${LINKSNDFILE})
install(TARGETS RtAudio DESTINATION C:/LUA/lua-5.1.5set/build482posixdwrf/libmodules)
#add_executable(testSaw RtAudio/tests/playsaw.cpp RtAudio/RtAudio.cpp ${ASIO})
#TARGET_LINK_LIBRARIES(testSaw winmm dsound)